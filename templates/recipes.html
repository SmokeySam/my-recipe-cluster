{% extends "base.html" %}
{% block content %}

     <h3 class="green-text center-align">All Recipes</h3>

     <div>
         <p>
             Welcome to Recipe Cluster, store your favorite recipes and explore others.
             Search recipes based on Cuisine, Ingredients and type of meal.
             Adding your recipes has never been so easy, may you never forget that tasty dish again!

             <a href="{{ url_for('login') }}">Login</a> to your account, or <a href="{{ url_for('sign_up') }}">Sign Up</a> with us to start creating and sharing those delicious meals!
         </p>
     </div>

     <img class="materialboxed" width="755" src={{ url_for('static', filename='images/recipe_cluster_home_image.jfif')}}>

     <div class="row card-panel grey lighten-5">
         <form action="{{ url_for('search') }}" method="post" class="col s12">
              <div class="row valign-wrapper center-align">
                  <div class="input-field col s12 m8">
                      <i class="fas fa-search prefix green-text"></i>
                      <input type="text" name="query" id="query" minlength="3" class="validate" required>
                      <label for="query">Search Recipes, Cuisine, Type</label>
                  </div>
                  <div class="col s12 m4">
                    <a href="{{ url_for('get_recipes') }}" class="red btn text-shadow">Reset</a>
                    <button type="submit" class="green btn text-shadow">
                        <i class="fas fa-search left"></i> Search
                    </button>
                </div>
              </div>   
         </form>
     </div>

     {% if recipes|length > 0 %}
     <ul class="collapsible">
        {% for recipe in recipes %}
        <li>
            <div class="collapsible-header white-text green text-shadow">
                <div class="col s3">
                    <i class="fas fa-caret-down"></i>
                    {% if session.user|lower == recipe.created_by|lower %}
                    <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" class="btn-small white black-text">Delete</a>
                    <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" class="btn-small white black-text">Edit</a>
                    {% endif %}
                </div>
                <div class="col s9">
                    <strong>{{ recipe.recipe_name }}</strong>
                </div>
            </div>
            <div class="collapsible-body">
                <p><strong>Cuisine</strong> : {{ recipe.recipe_cuisine }}</p>
                <p><strong>Type</strong> : {{ recipe.recipe_type }}</p>
                <p><strong>Time</strong> : {{ recipe.recipe_time }}</p>
                <p><strong>Serves</strong> : {{ recipe.recipe_serving }}</p>
                <p><strong>Allergens</strong> : {{ recipe.recipe_allergies }}</p>
                <p><strong>Ingredients</strong> : {{ recipe.recipe_ingredients }}</p>
                <p><strong>Equipment</strong> : {{ recipe.recipe_equipment }}</p>
                <p><strong>Method</strong> : {{ recipe.recipe_method }}</p>
                <p><strong>Notes</strong> : {{ recipe.recipe_notes }}</p>
                <p><em>By : {{ recipe.created_by }}</em></p>
            </div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
        <h3 class="red-text center-align">No Results Found</h3>
    {% endif %}

{% endblock %}